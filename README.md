# Тестовое задание от Root Code

<a href = "https://github.com/A-Kuklin/root_code_cv/blob/main/task_description.md">Само задание</a><br>
<a href = "https://github.com/A-Kuklin/root_code_cv/blob/main/.env.example">Пример `.env` файла</a><br>

Расположение сущностей из задания:<br>
• Веб-приложение — <a href = "https://github.com/A-Kuklin/root_code_cv/blob/main/app/">папка `app`</a><br>
• Фоновая задача 1 — <a href = "https://github.com/A-Kuklin/root_code_cv/blob/main/server/">папка `server`</a><br>
• Скрипт 1 — <a href = "https://github.com/A-Kuklin/root_code_cv/blob/main/server/">папка `server`</a><br>


## Запуск с помощью Docker
В случае, если тестовая база данных расположена на локальном компьютере, с которого осуществляется запуск, то
хост базы данных необходимо прописать как `host.docker.internal`

В папке с файлом `docker-compose.yml` выполнить команды:<br>

    docker-compose build
    docker-compose up

## Локальный запуск
 - запустить приложение `app.py`, 
 - следом сервер обработки сообщений `server.py`, 
 - после скрипт, который отправляет тестовые данные в базу данных `script.py`.

## APP
Код приложения FastAPI, один endpoint GET `/chart`, по которому отправляется график.<br>
Из задания<br>

    … приложение возвращает … столбчатая диаграмма, в которой … (по оси Х - время в минутах).
    График должен формироваться … с поминутной группировкой.

График строится поминутно в формате `1970-01-01 03:00`.<br>
Формат отображения минут можно поменять в `.env` файле.<br> 
Хост / порт указываются в `.env` файле.<br> 

## CLIENT
Скрипт, который раз в 10 секунд отправляет рандомные значения план / факт в виде `json`.

## SERVER
Задача, которая принимает значения от скрипта, описанного выше, и сохраняет данные в базу данных.
<br><br><br>

## СПРАВОЧНО
 - Из задания

        при старте бэка … нужно стартовать 1 фоновую задачу и 1 скрипт С.
        Веб-приложение вместе со скриптом 1 должны быть упакованы в докер-контейнер,
        скрипт С стартует вместе с бэком при запуске контейнера.

    Мог неправильно понять как должны быть скомпонованы веб-приложение / фоновая задача / скрипт, 
    поэтому разделил задачи на отдельные сервисы.<br><br>
 - Стоит обратить внимание на значения локального хоста при необходимости.<br>
    Например, для запуска в докере стоит указать `0.0.0.0`, при значениях `localhost` / `127.0.0.1` могут возникнуть проблемы.<br><br>
 - Пример изображения<br><br>
![Пример изображения](test_img.jpg "Title")

